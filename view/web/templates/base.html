<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investment - Web View</title>
    <link rel="icon" href="data:,">
    <link rel="stylesheet" href="/static/css/style.css?v=7">
    <style>
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .spinning { display: inline-block; animation: spin 1s linear infinite; opacity: 1 !important; }
        .toast-container { position: fixed; bottom: 20px; right: 20px; z-index: 10000; display: flex; flex-direction: column; gap: 10px; }
        .toast { background: var(--bg-secondary); color: var(--text-primary); padding: 12px 20px; border-radius: 8px; border: 1px solid var(--border); box-shadow: 0 4px 15px rgba(0,0,0,0.5); min-width: 250px; display: flex; align-items: center; gap: 12px; font-size: 0.9rem; animation: toast-in 0.3s ease-out forwards; }
        .toast.success { border-left: 4px solid #51cf66; }
        .toast.error { border-left: 4px solid #ff6b6b; }
        @keyframes toast-in { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .toast.fade-out { opacity: 0; transform: translateX(100%); transition: all 0.3s ease-in; }
        
        /* í˜ì´ì§€ ë¶„ë¦¬ í›„ ì„¹ì…˜ í‘œì‹œ ê°•ì œ */
        .section { display: block !important; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial/dist/chartjs-chart-financial.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
</head>
<body>

<header class="header">
    <h1>Investment</h1>
    <div class="status-bar">
        <span id="status-time">--</span>
        <span id="status-market" class="badge closed">--</span>
        <span id="status-env" class="badge paper clickable" onclick="toggleEnvironment()" title="í´ë¦­í•˜ì—¬ í™˜ê²½ ì „í™˜">--</span>
        <span id="btn-theme" class="badge clickable" onclick="toggleTheme()" title="í…Œë§ˆ ì „í™˜" style="background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border);">ğŸŒ™</span>
    </div>
</header>

<nav class="nav">
    <!-- Flaskì—ì„œ active_page ë³€ìˆ˜ë¥¼ ë„˜ê²¨ì£¼ì–´ í™œì„±í™” í´ë˜ìŠ¤ ì ìš© -->
    <a href="/" class="{% if active_page == 'stock' %}active{% endif %}">í˜„ì¬ê°€ ì¡°íšŒ</a>
    <a href="/balance" class="{% if active_page == 'balance' %}active{% endif %}">ê³„ì¢Œ ì”ê³ </a>
    <a href="/order" class="{% if active_page == 'order' %}active{% endif %}">ë§¤ìˆ˜/ë§¤ë„</a>
    <a href="/ranking" class="{% if active_page == 'ranking' %}active{% endif %}">ë­í‚¹</a>
    <a href="/marketcap" class="{% if active_page == 'marketcap' %}active{% endif %}">ì‹œê°€ì´ì•¡</a>
    <a href="/virtual" class="{% if active_page == 'virtual' %}active{% endif %}">ëª¨ì˜íˆ¬ì ê¸°ë¡</a>
    <a href="/scheduler" class="{% if active_page == 'scheduler' %}active{% endif %}">ì „ëµ ìŠ¤ì¼€ì¤„ëŸ¬</a>
    <a href="/program" class="{% if active_page == 'program' %}active{% endif %}">í”„ë¡œê·¸ë¨ë§¤ë§¤</a>
</nav>

<main class="main">
    {% block content %}
    <!-- ê° í˜ì´ì§€ì˜ ì½˜í…ì¸ ê°€ ì—¬ê¸°ì— ë“¤ì–´ê°‘ë‹ˆë‹¤ -->
    {% endblock %}
</main>

<div id="toast-container" class="toast-container"></div>

<!-- ê³µí†µ ìŠ¤í¬ë¦½íŠ¸ -->
<script src="/static/js/virtual_chart.js?v=5"></script>
<script src="/static/js/app.js?v=14"></script>
<script>
    function toggleTheme() {
        document.body.classList.toggle('light-mode');
        const isLight = document.body.classList.contains('light-mode');
        document.getElementById('btn-theme').innerText = isLight ? 'â˜€ï¸' : 'ğŸŒ™';
        localStorage.setItem('theme', isLight ? 'light' : 'dark');
    }

    // ì´ˆê¸° í…Œë§ˆ ë¡œë“œ
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'light') {
        document.body.classList.add('light-mode');
        document.getElementById('btn-theme').innerText = 'â˜€ï¸';
    }

    // í˜ì´ì§€ ë¶„ë¦¬ë¡œ ì¸í•´ íƒ­ ì „í™˜ ë¡œì§ì´ ë¶ˆí•„ìš”í•´ì¡Œìœ¼ë¯€ë¡œ, 
    // app.jsì˜ setupTabsê°€ ë™ì‘í•˜ì§€ ì•Šë„ë¡ í•˜ê±°ë‚˜ ë¬´ì‹œë©ë‹ˆë‹¤.
    // ëŒ€ì‹  ê° í˜ì´ì§€ë³„ ì´ˆê¸°í™” ë¡œì§ì„ ì•„ë˜ ë¸”ë¡ì— ì‘ì„±í•©ë‹ˆë‹¤.
</script>

{% block scripts %}
<!-- í˜ì´ì§€ë³„ ì¶”ê°€ ìŠ¤í¬ë¦½íŠ¸ -->
{% endblock %}

</body>
</html>